From fd2b4ee8036be96b9a574a4fa61a649ceaa1e45c Mon Sep 17 00:00:00 2001
From: Stefano Pacifici <stefano.pacifici@gmail.com>
Date: Wed, 10 Jun 2020 15:09:45 +0200
Subject: Disabling Mozilla Tracking protection

---
 app/src/main/java/org/mozilla/fenix/components/Core.kt          | 2 +-
 .../main/java/org/mozilla/fenix/settings/SettingsFragment.kt    | 2 ++
 app/src/main/res/xml/preferences.xml                            | 2 ++
 3 files changed, 5 insertions(+), 1 deletion(-)

diff --git a/app/src/main/java/org/mozilla/fenix/components/Core.kt b/app/src/main/java/org/mozilla/fenix/components/Core.kt
index 9bfe78f1c..88cbcf4fd 100644
--- a/app/src/main/java/org/mozilla/fenix/components/Core.kt
+++ b/app/src/main/java/org/mozilla/fenix/components/Core.kt
@@ -73,7 +73,7 @@ class Core(private val context: Context) {
             requestInterceptor = AppRequestInterceptor(context),
             remoteDebuggingEnabled = context.settings().isRemoteDebuggingEnabled,
             testingModeEnabled = false,
-            trackingProtectionPolicy = trackingProtectionPolicyFactory.createTrackingProtectionPolicy(),
+            trackingProtectionPolicy = null, // Ghostery: trackingProtectionPolicyFactory.createTrackingProtectionPolicy(),
             historyTrackingDelegate = HistoryDelegate(lazyHistoryStorage),
             preferredColorScheme = getPreferredColorScheme(),
             automaticFontSizeAdjustment = context.settings().shouldUseAutoSize,
diff --git a/app/src/main/java/org/mozilla/fenix/settings/SettingsFragment.kt b/app/src/main/java/org/mozilla/fenix/settings/SettingsFragment.kt
index 153948648..6511cc463 100644
--- a/app/src/main/java/org/mozilla/fenix/settings/SettingsFragment.kt
+++ b/app/src/main/java/org/mozilla/fenix/settings/SettingsFragment.kt
@@ -126,6 +126,7 @@ class SettingsFragment : PreferenceFragmentCompat() {
     }
 
     private fun update(shouldUpdateAccountUIState: Boolean) {
+        /* Ghostery Begin: Removing tracking protection as it will be performed by Ghostery +/
         val trackingProtectionPreference =
             requirePreference<Preference>(R.string.pref_key_tracking_protection_settings)
         trackingProtectionPreference.summary = context?.let {
@@ -135,6 +136,7 @@ class SettingsFragment : PreferenceFragmentCompat() {
                 getString(R.string.tracking_protection_off)
             }
         }
+        /+ Ghostery End */
 
         val aboutPreference = requirePreference<Preference>(R.string.pref_key_about)
         val appName = getString(R.string.app_name)
diff --git a/app/src/main/res/xml/preferences.xml b/app/src/main/res/xml/preferences.xml
index 52366fea1..bc25b8611 100644
--- a/app/src/main/res/xml/preferences.xml
+++ b/app/src/main/res/xml/preferences.xml
@@ -89,10 +89,12 @@
             android:key="@string/pref_key_private_browsing"
             android:title="@string/preferences_private_browsing_options"/>
 
+        <!-- Ghostery Begin: tracking protection is a Ghostery thing -+>
         <androidx.preference.Preference
             android:icon="@drawable/ic_tracking_protection_enabled"
             android:key="@string/pref_key_tracking_protection_settings"
             android:title="@string/preference_enhanced_tracking_protection" />
+        <!- Ghostery End -->
 
         <androidx.preference.Preference
             android:icon="@drawable/ic_permission"
-- 
2.25.1

